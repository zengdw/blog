{"title":"skywalking安装使用","uid":"32a5e6863115b0ca6ae97605b6a79f16","slug":23539,"date":"2020-09-21T08:54:44.000Z","updated":"2024-11-13T02:24:55.977Z","comments":true,"path":"api/articles/23539.json","keywords":"zengdw, java, html, js, css, spring, mysql","cover":[],"content":"<h2 id=\"skywalking简介\"><a href=\"#skywalking简介\" class=\"headerlink\" title=\"skywalking简介\"></a>skywalking简介</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>分布式系统的应用程序性能监视工具，专为微服务、云原生架构和基于容器（Docker、K8s、Mesos）架构而设计。</p></blockquote>\n<p><a href=\"http://skywalking.apache.org/zh/\">skywalking官网</a>     <a href=\"http://skywalking.apache.org/zh/downloads/\">sklwalking下载地址</a></p>\n<h2 id=\"环境搭建\"><a href=\"#环境搭建\" class=\"headerlink\" title=\"环境搭建\"></a>环境搭建</h2><h3 id=\"1、下载解压后的文件结构：\"><a href=\"#1、下载解压后的文件结构：\" class=\"headerlink\" title=\"1、下载解压后的文件结构：\"></a>1、下载解压后的文件结构：</h3><p><img src=\"../images/image-20200922155624650.png\" alt=\"image-20200922155624650\"></p>\n<h3 id=\"2、修改后端配置文件\"><a href=\"#2、修改后端配置文件\" class=\"headerlink\" title=\"2、修改后端配置文件\"></a>2、修改后端配置文件</h3><p><code>apache-skywalking-apm-bin\\config\\application.yml</code></p>\n<p>启动方式，默认单机启动</p>\n<p><img src=\"../images/image-20200922161543029.png\" alt=\"image-20200922161543029\"></p>\n<p>HTTP和RPC地址和端口</p>\n<p><img src=\"../images/image-20200922161820052.png\" alt=\"image-20200922161820052\"></p>\n<p>数据存储位置，默认H2。可选es，es7，mysql</p>\n<p><img src=\"../images/image-20200922161919461.png\" alt=\"image-20200922161919461\"></p>\n<h3 id=\"3、UI项目配置文件\"><a href=\"#3、UI项目配置文件\" class=\"headerlink\" title=\"3、UI项目配置文件\"></a>3、UI项目配置文件</h3><p><code>apache-skywalking-apm-bin\\webapp\\webapp.yml</code></p>\n<p><img src=\"../images/image-20200922162750191.png\" alt=\"image-20200922162750191\"></p>\n<h3 id=\"4、启动skywalking\"><a href=\"#4、启动skywalking\" class=\"headerlink\" title=\"4、启动skywalking\"></a>4、启动skywalking</h3><p>进入<code>apache-skywalking-apm-bin\\bin</code>文件夹</p>\n<p><img src=\"../images/image-20200922162129431.png\" alt=\"image-20200922162129431\"></p>\n<p>至此skywalking环境就搭建成功。在浏览器输入<code>http://127.0.0.1:8080</code>地址后就能看到UI界面</p>\n<h2 id=\"探针配置文件\"><a href=\"#探针配置文件\" class=\"headerlink\" title=\"探针配置文件\"></a>探针配置文件</h2><p>探针配置文件<code>apache-skywalking-apm-bin\\agent\\config\\agent.config</code></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># The agent namespace\n# agent.namespace&#x3D;$&#123;SW_AGENT_NAMESPACE:default-namespace&#125;\n\n# The service name in UI\n# 在UI界面显示的应用名字, 可以在配置文件中修改 Your_ApplicationName 为每个应用的名称\n# 但在配置文件中修改就需要 agent 文件夹每个应用要复制一份\nagent.service_name&#x3D;$&#123;SW_AGENT_NAME:Your_ApplicationName&#125;\n\n# Backend service addresses.\n# 探针数字上传地址，为上面后端配置文件中的RPC地址\ncollector.backend_service&#x3D;$&#123;SW_AGENT_COLLECTOR_BACKEND_SERVICES:127.0.0.1:11800&#125;</code></pre>\n\n<p>只需确保这2个配置就行，其余可以默认</p>\n<h3 id=\"配置覆盖\"><a href=\"#配置覆盖\" class=\"headerlink\" title=\"配置覆盖\"></a>配置覆盖</h3><p>前面在配置应用名称时是直接修改的配置文件，但是每个应用都需要复制一份<code>agent</code>文件，这显然不可取。可以使用skywalking提供的配置覆盖功能通过启动命令动态指定要修改的配置，这样<code>agent</code>就只需要一份。</p>\n<h4 id=\"系统配置\"><a href=\"#系统配置\" class=\"headerlink\" title=\"系统配置\"></a>系统配置</h4><p>使用<code>skywalking</code>+配置文件中的配置名来作为系统配置项来进行覆盖</p>\n<p>案例：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-Dskywalking.agent.service_name&#x3D;app_name</code></pre>\n\n<h4 id=\"探针配置\"><a href=\"#探针配置\" class=\"headerlink\" title=\"探针配置\"></a>探针配置</h4><p>通过在探针路径后添加参数来覆盖</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-javaagent:&#x2F;path&#x2F;apache-skywalking-apm-bin&#x2F;agent&#x2F;skywalking-agent.jar&#x3D;[option1]&#x3D;[value1],[option2]&#x3D;[value2]</code></pre>\n\n<p>案例</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-javaagent:&#x2F;path&#x2F;apache-skywalking-apm-bin&#x2F;agent&#x2F;skywalking-agent.jar&#x3D;agent.service_name&#x3D;app_name</code></pre>\n\n<p>如果配置中包含分隔符，则需要用引号包裹</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-javaagent:&#x2F;path&#x2F;apache-skywalking-apm-bin&#x2F;agent&#x2F;skywalking-agent.jar&#x3D;agent.service_name&#x3D;app_name,agent.ignore_suffix&#x3D;‘.jpg,.jpeg’</code></pre>\n\n<h4 id=\"系统环境变量配置\"><a href=\"#系统环境变量配置\" class=\"headerlink\" title=\"系统环境变量配置\"></a>系统环境变量配置</h4><p>由于配置项的取值规则如下</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># The service name in UI\nagent.service_name&#x3D;$&#123;SW_AGENT_NAME:Your_ApplicationName&#125;</code></pre>\n\n<p>则可以在系统环境变量中配置<code>SW_AGENT_NAME</code>的值来指定应用名</p>\n<h4 id=\"覆盖优先级\"><a href=\"#覆盖优先级\" class=\"headerlink\" title=\"覆盖优先级\"></a>覆盖优先级</h4><p>探针配置 &gt; 系统配置 &gt; 系统环境变量配置 &gt; 配置文件</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><h3 id=\"在IDEA中使用\"><a href=\"#在IDEA中使用\" class=\"headerlink\" title=\"在IDEA中使用\"></a>在IDEA中使用</h3><p><img src=\"../images/image-20200922170014378.png\" alt=\"image-20200922170014378\"></p>\n<h3 id=\"linux下在tomcat中使用\"><a href=\"#linux下在tomcat中使用\" class=\"headerlink\" title=\"linux下在tomcat中使用\"></a>linux下在tomcat中使用</h3><p>编辑<code>apache-tomcat-8.5.42\\bin\\catalina.sh</code>文件，在文件顶部添加</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">CATALINA_OPTS&#x3D;&quot;CATALINA_OPTS -javaagent:&#x2F;path&#x2F;apache-skywalking-apm-bin&#x2F;agent&#x2F;skywalking-agent.jar&#x3D;agent.service_name&#x3D;app_name&quot;;\nexport CATALINA_OPTS</code></pre>\n\n<h3 id=\"springboot项目使用\"><a href=\"#springboot项目使用\" class=\"headerlink\" title=\"springboot项目使用\"></a>springboot项目使用</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">java -javaagent:&#x2F;path&#x2F;apache-skywalking-apm-bin&#x2F;agent&#x2F;skywalking-agent.jar -Dskywalking.agent.service_name&#x3D;app_name -jar app.jar</code></pre>\n\n","text":"skywalking简介 分布式系统的应用程序性能监视工具，专为微服务、云原生架构和基于容器（Docker、K8s、Mesos）架构而设计。 skywalking官网 sklwalking下载地址 环境搭建1、下载解压后的文件结构： 2、修改后端配置文件apache-skywal...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"中间键","slug":"中间键","count":3,"path":"api/categories/中间键.json"}],"tags":[{"name":"skywalking","slug":"skywalking","count":1,"path":"api/tags/skywalking.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#skywalking%E7%AE%80%E4%BB%8B\"><span class=\"toc-text\">skywalking简介</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA\"><span class=\"toc-text\">环境搭建</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E4%B8%8B%E8%BD%BD%E8%A7%A3%E5%8E%8B%E5%90%8E%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%EF%BC%9A\"><span class=\"toc-text\">1、下载解压后的文件结构：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E4%BF%AE%E6%94%B9%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">2、修改后端配置文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81UI%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">3、UI项目配置文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E3%80%81%E5%90%AF%E5%8A%A8skywalking\"><span class=\"toc-text\">4、启动skywalking</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8E%A2%E9%92%88%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">探针配置文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E8%A6%86%E7%9B%96\"><span class=\"toc-text\">配置覆盖</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">系统配置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8E%A2%E9%92%88%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">探针配置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">系统环境变量配置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%A6%86%E7%9B%96%E4%BC%98%E5%85%88%E7%BA%A7\"><span class=\"toc-text\">覆盖优先级</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9C%A8IDEA%E4%B8%AD%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">在IDEA中使用</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#linux%E4%B8%8B%E5%9C%A8tomcat%E4%B8%AD%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">linux下在tomcat中使用</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#springboot%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">springboot项目使用</span></a></li></ol></li></ol>","author":{"name":"zengdw","slug":"blog-author","avatar":"/img/z.png","link":"/","description":"个人学习记录","socials":{"github":"https://github.com/zengdw","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"gitee":{"icon":"/img/svg/gitee.svg","link":"https://gitee.com/zengdw"},"email":{"icon":"/img/svg/email-fill.svg","link":"mailto:309606298@qq.com"}}}},"mapped":true,"prev_post":{"title":"修改powerDesigner生成mysql关键字默认双引号问题","uid":"34ee5f9776190da84e997dce1e66c72e","slug":58587,"date":"2020-09-23T02:47:48.000Z","updated":"2024-11-13T02:24:55.918Z","comments":true,"path":"api/articles/58587.json","keywords":"zengdw, java, html, js, css, spring, mysql","cover":[],"text":"在powerDesigner中设计完数据表后，执行generate database时生成的sql中如果有表的字段是关键字时可能会出现双引号的问题。 只需修改下面这个地方，在生成sql时就是替换为反引号 ","link":"","photos":[],"count_time":{"symbolsCount":104,"symbolsTime":"1 mins."},"categories":[{"name":"软件工具","slug":"软件工具","count":5,"path":"api/categories/软件工具.json"}],"tags":[{"name":"powerDesigner","slug":"powerDesigner","count":1,"path":"api/tags/powerDesigner.json"},{"name":"mysql","slug":"mysql","count":1,"path":"api/tags/mysql.json"}],"author":{"name":"zengdw","slug":"blog-author","avatar":"/img/z.png","link":"/","description":"个人学习记录","socials":{"github":"https://github.com/zengdw","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"gitee":{"icon":"/img/svg/gitee.svg","link":"https://gitee.com/zengdw"},"email":{"icon":"/img/svg/email-fill.svg","link":"mailto:309606298@qq.com"}}}}},"next_post":{"title":"js判断键盘大小写是否开启","uid":"4e388504f2bd8f8f69b1914f1e554b37","slug":30463,"date":"2020-09-11T03:40:20.000Z","updated":"2024-11-07T06:45:23.579Z","comments":true,"path":"api/articles/30463.json","keywords":"zengdw, java, html, js, css, spring, mysql","cover":null,"text":"&lt;input onkeypress&#x3D;&quot;detectCapsLock()&quot; type&#x3D;&quot;password&quot; name&#x3D;&quot;password&quot; &#x2F;&gt; &lt;span sty...","link":"","photos":[],"count_time":{"symbolsCount":692,"symbolsTime":"1 mins."},"categories":[{"name":"前端","slug":"前端","count":6,"path":"api/categories/前端.json"}],"tags":[{"name":"js","slug":"js","count":4,"path":"api/tags/js.json"}],"author":{"name":"zengdw","slug":"blog-author","avatar":"/img/z.png","link":"/","description":"个人学习记录","socials":{"github":"https://github.com/zengdw","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"gitee":{"icon":"/img/svg/gitee.svg","link":"https://gitee.com/zengdw"},"email":{"icon":"/img/svg/email-fill.svg","link":"mailto:309606298@qq.com"}}}}}}